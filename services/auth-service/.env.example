# Application Configuration
ADDR=:8080

# Database Configuration
# For local development (outside Docker), use POSTGRES_HOST=localhost
# For Docker Compose (inside Docker network), use POSTGRES_HOST=postgres
POSTGRES_USER=postgres
POSTGRES_PASSWORD=your_secure_password_here
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_DB=social
POSTGRES_SSLMODE=disable

# Database Connection Pool Settings
DB_MAX_OPEN_CONNS=30
DB_MAX_IDLE_CONNS=30
DB_MAX_IDLE_TIME=15m

REDIS_ADDR=localhost:6379
REDIS_PASSWORD=your_secure_password_here
REDIS_DB=0
REDIS_POOL_SIZE=10
REDIS_MIN_IDLE_CONNS=2

# RabbitMQ credentials
RABBITMQ_USER=user
RABBITMQ_PASSWORD=password

# URL used by auth-service to connect to RabbitMQ
# When running auth-service locally (host) and RabbitMQ in Docker on same machine:
RABBITMQ_URL=amqp://user:password@localhost:5672/

# When running auth-service as a container on the same docker network, use:
# RABBITMQ_URL=amqp://user:password@rabbitmq:5672/

# CORS - Set your frontend origin(s)
CORS_ALLOWED_ORIGINS=http://localhost:3000,https://your-frontend.com

# Cookie Security (Production)
ENVIRONMENT=production
# OR
COOKIE_SECURE=true


SECURITY_HEADERS_ENABLED=true
REQUEST_BODY_MAX_SIZE=1048576  # 1MB
LOG_LEVEL=info          # debug, info, warn, error
LOG_FORMAT=json         # json or console (default: console)
# Metrics Endpoint Security (REQUIRED for production)
# Option 1: IP Whitelist (recommended for Prometheus scraping)
# Comma-separated list of allowed IPs. Supports CIDR notation.
# Example: "127.0.0.1,10.0.0.0/8,192.168.1.0/24"
METRICS_ALLOWED_IPS=127.0.0.1

# Option 2: API Key Authentication
# Set a secret API key. Clients must send it via X-Metrics-API-Key header or ?api_key= query param
# METRICS_API_KEY=your-secret-metrics-key-here

# Option 3: Require Admin Authentication
# Set to 'true' to require admin role (role_id=3) via JWT token
# METRICS_REQUIRE_AUTH=false

# Note: If none of the above are set, metrics endpoint is PUBLIC (development only!)
